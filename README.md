# MCP + é˜¿é‡Œäº‘ Qwen æ™ºèƒ½æŸ¥è¯¢ç³»ç»Ÿ

è¿™ä¸ªé¡¹ç›®æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ MCP (Model Context Protocol) å’Œé˜¿é‡Œäº‘ Qwen æ¨¡å‹æ„å»ºä¸€ä¸ªæ™ºèƒ½ç”¨æˆ·æ•°æ®åº“æŸ¥è¯¢ç³»ç»Ÿã€‚

## é¡¹ç›®è¯´æ˜

é¡¹ç›®å·²ä»ä½¿ç”¨æœ¬åœ° Ollama æ¨¡å‹æ”¹ä¸ºä½¿ç”¨é˜¿é‡Œäº‘ Qwen æ¨¡å‹ã€‚ä¸»è¦æ”¹åŠ¨åŒ…æ‹¬ï¼š

### æ›´æ–°å†…å®¹ï¼š

1. **client.py** - æ›¿æ¢äº† LLM è°ƒç”¨æ–¹å¼
   - ç§»é™¤äº† `ollama` ä¾èµ–
   - ä½¿ç”¨ `OpenAI` å®¢æˆ·ç«¯è¿æ¥åˆ°é˜¿é‡Œäº‘ DashScope æœåŠ¡
   - è°ƒç”¨é˜¿é‡Œäº‘ `qwen-flash` æ¨¡å‹

2. **requirements.txt** - æ›´æ–°ä¾èµ–
   - ç§»é™¤ `ollama>=0.1.0`
   - æ·»åŠ  `openai>=1.0.0`
   - æ·»åŠ  `python-dotenv>=0.19.0`

3. **ç¯å¢ƒé…ç½®**
   - éœ€è¦åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½® `ALIYUN_MODEL_API_KEY`

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä½ çš„é˜¿é‡Œäº‘ API KEYï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```
ALIYUN_MODEL_API_KEY=your_actual_api_key_here
```

### 3. å¯åŠ¨ MCP æœåŠ¡å™¨

åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£å¯åŠ¨ MCP æœåŠ¡å™¨ï¼š

```bash
python mcp_server.py
```

### 4. è¿è¡Œå®¢æˆ·ç«¯

åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£è¿è¡Œå®¢æˆ·ç«¯ï¼š

```bash
python client.py
```

## ä½¿ç”¨ç¤ºä¾‹

```
ğŸ’¬ æ™ºèƒ½ç”¨æˆ·æŸ¥è¯¢åŠ©æ‰‹ (MCP + é˜¿é‡Œäº‘ Qwen)
âœ… å·²è¿æ¥åˆ°é˜¿é‡Œäº‘ Qwen (qwen-flash)
â“ è¾“å…¥ä½ çš„é—®é¢˜ï¼Œè¾“å…¥ 'exit' é€€å‡º
--------------------------------------------------

ğŸ‘¤ ä½ : æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
ğŸ¤– AI æ€è€ƒä¸­...
ğŸ§  LLM å†³ç­–: {"tool": "query_users", "arguments": {}}
ğŸ”§ è°ƒç”¨å·¥å…·: query_users
ğŸ“Š å·¥å…·å‚æ•°: {}
âœ… å·¥å…·ç»“æœ: {'status': 'success', 'count': 3, 'users': [...]}
ğŸ¤– AI: ç³»ç»Ÿä¸­å…±æœ‰ 3 ä¸ªç”¨æˆ·...
```

## è·å–é˜¿é‡Œäº‘ API KEY

1. è®¿é—® https://dashscope.console.aliyun.com/
2. ç™»å½•ä½ çš„é˜¿é‡Œäº‘è´¦æˆ·ï¼ˆæˆ–æ³¨å†Œæ–°è´¦æˆ·ï¼‰
3. åˆ›å»º API KEY
4. å°† API KEY å¤åˆ¶åˆ° `.env` æ–‡ä»¶

## æ¨¡å‹ä¿¡æ¯

- **æ¨¡å‹**: qwen-flash
- **API åœ°å€**: https://dashscope.aliyuncs.com/compatible-mode/v1
- **å…¼å®¹æ€§**: ä¸ OpenAI API å…¼å®¹

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ client.py                  # MCP å®¢æˆ·ç«¯ - ä¸é˜¿é‡Œäº‘ Qwen å’Œ MCP æœåŠ¡å™¨äº¤äº’
â”œâ”€â”€ mcp_server.py              # MCP æœåŠ¡å™¨ - æä¾›ç”¨æˆ·æ•°æ®åº“æŸ¥è¯¢å·¥å…·
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â””â”€â”€ aliyun-qwen-api-demo/     # é˜¿é‡Œäº‘ Qwen API æ¼”ç¤º
    â”œâ”€â”€ generate-demo.py      # æ–‡æœ¬ç”Ÿæˆæ¼”ç¤º
    â””â”€â”€ embedding-demo.py     # å‘é‡åµŒå…¥æ¼”ç¤º
```

## è®¸å¯è¯

MIT
